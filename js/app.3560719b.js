(function(e){function t(t){for(var n,l,i=t[0],c=t[1],s=t[2],p=0,u=[];p<i.length;p++)l=i[p],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&u.push(r[l][0]),r[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(u.length)u.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={app:0},o=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2395:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"app"}},[a("el-header",[a("el-row",{staticClass:"option-row",attrs:{gutter:20}},[a("el-col",{staticClass:"option-col",attrs:{span:6}},[a("el-button",{staticClass:"option-btn",attrs:{type:"primary"},on:{click:function(t){e.drawer=!0}}},[e._v("输入数据")])],1),a("el-col",{staticClass:"option-col",attrs:{span:6}},[a("el-button",{staticClass:"option-btn",attrs:{type:"primary"},on:{click:function(t){e.treeData=[]}}},[e._v("清除数据")])],1),a("el-col",{staticClass:"option-col",attrs:{span:6}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.horizontal,expression:"horizontal"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.horizontal)?e._i(e.horizontal,null)>-1:e.horizontal},on:{change:function(t){var a=e.horizontal,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=null,l=e._i(a,o);n.checked?l<0&&(e.horizontal=a.concat([o])):l>-1&&(e.horizontal=a.slice(0,l).concat(a.slice(l+1)))}else e.horizontal=r}}}),e._v(" 是否横向展示 ")])]),a("el-col",{staticClass:"option-col",attrs:{span:6}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.expandAll,expression:"expandAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.expandAll)?e._i(e.expandAll,null)>-1:e.expandAll},on:{change:[function(t){var a=e.expandAll,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=null,l=e._i(a,o);n.checked?l<0&&(e.expandAll=a.concat([o])):l>-1&&(e.expandAll=a.slice(0,l).concat(a.slice(l+1)))}else e.expandAll=r},e.expandChange]}}),e._v(" 是否展开所有 ")])])],1)],1),a("el-drawer",{attrs:{title:"我是标题",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[a("el-input",{staticClass:"input-area",attrs:{type:"textarea",autosize:{minRows:20,maxRows:27},resize:"none",clearable:"",placeholder:"请输入内容"},model:{value:e.textarea1,callback:function(t){e.textarea1=t},expression:"textarea1"}}),a("el-button",{staticClass:"input-button",on:{click:e.generateTree}},[e._v("生成")])],1),e._l(e.treeData,(function(t){return a("div",{directives:[{name:"drag",rawName:"v-drag"}],key:t.label,staticClass:"tree-graph"},[a("vue2-org-tree",{attrs:{data:t,collapsable:"",labelClassName:e.classOfPopover,horizontal:e.horizontal},on:{"on-expand":e.onExpand,"on-node-click":e.showPopover}})],1)})),a("el-popover",{ref:"popover",attrs:{placement:"top-start",title:"",width:"160",trigger:"manual",content:e.popContent}}),a("el-backtop",{attrs:{target:".page-component__scroll .el-scrollbar__wrap"}})],2)},o=[],l=(a("7db0"),a("c740"),a("4160"),a("c975"),a("a434"),a("ac1f"),a("466d"),a("a1f0"),a("1276"),a("159b"),a("53ca")),i=a("b85c"),c={name:"App",data:function(){return{textarea1:"",horizontal:!1,expandAll:!1,drawer:!1,popContent:"",regexp:{teacher:/^导师：(\S+)$/m,stu:/^(\d+级)(本科|硕士|博士)生：(\S+)/gm,tag:/\n\n(\S+)：(\S+)/gm},treeData0:[{label:"张三",tag:"导师",isTeacher:!0,children:[{label:"2016级",children:[{label:"硕士",children:[{label:"刘一",tag:"什么都不会",isTeacher:!1,expand:!0},{label:"李二",isTeacher:!1,expand:!0}],expand:!0}],expand:!0},{label:"2022级",children:[{label:"本科",children:[{label:"刘六",tag:"字节跳动、京东云",isTeacher:!1,expand:!0}],expand:!0}],expand:!0}],expand:!0}],treeData:[],nodeData:{},defaultProps:{children:"children",label:"label"}}},mounted:function(){document.addEventListener("click",this.closePopover)},methods:{generateTree:function(){var e=this;if(!this.textarea1)return!1;var t,a=Object(i["a"])(this.textarea1.split("\n\n\n"));try{for(a.s();!(t=a.n()).done;){var n=t.value,r={},o=n.match(this.regexp.teacher);if(null===o)return!1;r.label=o[1],r.tag="导师",r.isTeacher=!0,this.nodeData[o[1]]={isTeacher:!0,node:r};var l,c={},s=Object(i["a"])(n.matchAll(this.regexp.tag));try{for(s.s();!(l=s.n()).done;){var d=l.value;c[d[1]]=d[2]}}catch(m){s.e(m)}finally{s.f()}r.children=[];var p,u=Object(i["a"])(n.matchAll(this.regexp.stu));try{for(u.s();!(p=u.n()).done;){var h=p.value,f={};f.label=h[1],f.children=[];var v={};v.label=h[2],v.children=[];var b,x=Object(i["a"])(h[3].split("、"));try{var g=function(){var t=b.value,a={label:t,tag:c[t],isTeacher:!1};if(v.children.push(a),e.nodeData[t]&&e.nodeData[t].isTeacher){a.children=e.nodeData[t].node.children,a.isTeacher=!0,e.nodeData[t].node={isTeacher:!0,node:a};var n=e.treeData.findIndex((function(e){return e.label===t}));return e.treeData.splice(n,1),"continue"}e.nodeData[t]={isTeacher:!1,node:a}};for(x.s();!(b=x.n()).done;)g()}catch(m){x.e(m)}finally{x.f()}f.children.push(v),this.mergerTree(r.children,f)}}catch(m){u.e(m)}finally{u.f()}this.mergerTree(this.treeData,r)}}catch(m){a.e(m)}finally{a.f()}this.textarea1="",this.drawer=!1},mergerTree:function(e,t){var a=e.find((function(e){return e.label===t.label}));if(void 0!==a){var n,r=Object(i["a"])(t.children||[]);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.mergerTree(a.children,o)}}catch(l){r.e(l)}finally{r.f()}}else e.push(t)},getAbsolutePos:function(e){var t={top:0,left:0};while(e.offsetParent)t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent;return t},showPopover:function(e,t){e.stopPropagation();var a=e.target;if(a.className.indexOf("tree-teacher")+a.className.indexOf("tree-student")!==-2){this.popContent=t.tag||"暂无tag";var n=document.getElementById(this.$refs.popover.tooltipId),r=this.getAbsolutePos(a);null!==n&&(n.style.left=r.left+"px",n.style.top=r.top+a.getBoundingClientRect().height+10+"px",this.$refs.popover.doShow())}},closePopover:function(){"object"===Object(l["a"])(this.$refs.popover)&&this.$refs.popover.doClose()},classOfPopover:function(e){return e.isTeacher?"tree-teacher":!1===e.isTeacher?"tree-student":void 0},onExpand:function(e,t){"expand"in t?(t.expand=!t.expand,!t.expand&&t.children&&this.collapse(t.children)):this.$set(t,"expand",!0)},collapse:function(e){var t=this;e.forEach((function(e){e.expand&&(e.expand=!1),e.children&&t.collapse(e.children)}))},expandChange:function(){this.toggleExpand(this.treeData,this.expandAll)},toggleExpand:function(e,t){var a=this;Array.isArray(e)?e.forEach((function(e){a.$set(e,"expand",t),e.children&&a.toggleExpand(e.children,t)})):(this.$set(e,"expand",t),e.children&&a.toggleExpand(e.children,t))}}},s=c,d=(a("7c55"),a("2877")),p=Object(d["a"])(s,r,o,!1,null,null,null),u=p.exports,h=a("5c96"),f=a.n(h),v=(a("0fae"),a("b0a7")),b=a.n(v);a("190f");n["default"].use(f.a),n["default"].use(b.a),n["default"].config.productionTip=!1,n["default"].directive("drag",{bind:function(e,t,a){e.onmousedown=function(t){var a=t.clientX-e.offsetLeft,n=t.clientY-e.offsetTop;document.onmousemove=function(t){e.style.left=t.clientX-a+"px",e.style.top=t.clientY-n+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}}),new n["default"]({render:function(e){return e(u)}}).$mount("#app")},"7c55":function(e,t,a){"use strict";var n=a("2395"),r=a.n(n);r.a}});
//# sourceMappingURL=app.3560719b.js.map